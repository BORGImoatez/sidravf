<div class="dashboard-national">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="header-content">
            <div class="header-text">
                <h1>Tableau de Bord de la structure</h1>
                <p class="subtitle">Syst√®me d'Information sur les Drogues et Addictions</p>
            </div>
            <div class="header-actions">
                <button class="btn-icon" (click)="toggleFilters()" title="Filtres">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="btn-export" (click)="exportData()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Exporter
                </button>
            </div>
        </div>
    </div>

    <!-- Filters Section -->
    <div class="filters-section" [class.collapsed]="!showFilters">
        <div class="filters-header">
            <h2>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="11" cy="11" r="8" stroke-width="2"/>
                    <path d="M21 21l-4.35-4.35" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Filtres de recherche
            </h2>
        </div>

        <div class="filters-content">
            <div class="filters-grid">
                <div class="filter-group">
                    <label>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2M12 11a4 4 0 100-8 4 4 0 000 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Sexe
                    </label>
                    <select [(ngModel)]="filters.sexe" (change)="onFilterChange()">
                        <option value="tous">Tous</option>
                        <option value="homme">Homme</option>
                        <option value="femme">Femme</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
                            <path d="M16 2v4M8 2v4M3 10h18" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Ann√©e
                    </label>
                    <select [(ngModel)]="filters.anneeConsultation" (change)="onFilterChange()">
                        <option [value]="0">Toutes</option>
                        <option *ngFor="let annee of anneesDisponibles" [value]="annee">{{ annee }}</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
                            <path d="M16 2v4M8 2v4M3 10h18" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Mois
                    </label>
                    <select [(ngModel)]="filters.moisConsultation" (change)="onFilterChange()">
                        <option *ngFor="let mois of moisOptions" [value]="mois.value">{{ mois.label }}</option>
                    </select>
                </div>


                <div class="filter-group">
                    <label>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2v20M2 12h20" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        √Çge minimum
                    </label>
                    <input type="number" [(ngModel)]="filters.ageMin" (change)="onFilterChange()" min="0" placeholder="Ex: 18">
                </div>

                <div class="filter-group">
                    <label>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2v20M2 12h20" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        √Çge maximum
                    </label>
                    <input type="number" [(ngModel)]="filters.ageMax" (change)="onFilterChange()" min="0" placeholder="Ex: 65">
                </div>
            </div>

            <div class="filter-group-checkbox">
                <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="usePeriode" (change)="onFilterChange()">
                    <span class="checkbox-custom"></span>
                    <span>Filtrer par p√©riode sp√©cifique</span>
                </label>
            </div>

            <div class="filters-grid" *ngIf="usePeriode">
                <div class="filter-group">
                    <label>Date d√©but</label>
                    <input type="date" [(ngModel)]="filters.dateDebut" (change)="onFilterChange()">
                </div>
                <div class="filter-group">
                    <label>Date fin</label>
                    <input type="date" [(ngModel)]="filters.dateFin" (change)="onFilterChange()">
                </div>
            </div>

            <div class="filter-group-checkbox">
                <label class="checkbox-label">
                    <input type="checkbox" [(ngModel)]="voirMesStatistiques" (change)="onFilterChange()">
                    <span class="checkbox-custom"></span>
                    <span>Voir mes statistiques uniquement</span>
                </label>
            </div>

            <div class="tranches-age">
                <h3>Filtres rapides par tranche d'√¢ge</h3>
                <div class="tranches-buttons">
                    <button *ngFor="let tranche of tranchesAge"
                            (click)="selectTrancheAge(tranche)"
                            class="btn-tranche">
                        {{ tranche.label }}
                    </button>
                </div>
            </div>

            <div class="filter-actions">
                <button class="btn-reset" (click)="resetFilters()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M1 4v6h6M23 20v-6h-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    R√©initialiser
                </button>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="loading">
        <div class="spinner"></div>
        <p>Chargement des statistiques...</p>
    </div>

    <!-- Error State -->
    <div class="error-state" *ngIf="error">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="12" cy="12" r="10" stroke-width="2"/>
            <path d="M12 8v4M12 16h.01" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <p>{{ error }}</p>
    </div>

    <!-- Statistics Content -->
    <div class="statistics-content" *ngIf="statistiques && !loading">
        <!-- KPI Cards -->
        <div class="kpi-section">
            <div class="kpi-card primary">
                <div class="kpi-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 11a4 4 0 100-8 4 4 0 000 8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="kpi-content">
                    <div class="kpi-label">Total consultations</div>
                    <div class="kpi-value">{{ statistiques.totalConsultations || 0 | number }}</div>
                </div>
            </div>

            <div class="kpi-card success">
                <div class="kpi-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M8.5 11a4 4 0 100-8 4 4 0 000 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="kpi-content">
                    <div class="kpi-label">Hommes</div>
                    <div class="kpi-value">{{ statistiques.repartitionSexe?.hommes || 0 | number }}</div>
                </div>
            </div>

            <div class="kpi-card warning">
                <div class="kpi-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M8.5 11a4 4 0 100-8 4 4 0 000 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="kpi-content">
                    <div class="kpi-label">Femmes</div>
                    <div class="kpi-value">{{ statistiques.repartitionSexe?.femmes || 0 | number }}</div>
                </div>
            </div>

            <div class="kpi-card info">
                <div class="kpi-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10" stroke-width="2"/>
                        <path d="M12 16v-4M12 8h.01" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="kpi-content">
                    <div class="kpi-label">√Çge moyen</div>
                    <div class="kpi-value">{{ (statistiques.moyenneAge || 0).toFixed(1) }}<span class="unit">ans</span></div>
                </div>
            </div>

            <div class="kpi-card danger">
                <div class="kpi-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0zM12 9v4M12 17h.01" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="kpi-content">
                    <div class="kpi-label">D√©c√®s li√©s aux drogues</div>
                    <div class="kpi-value">{{ statistiques.decesLieDrogues || 0 }}</div>
                </div>
            </div>
            <!-- Ajoutez ces KPIs suppl√©mentaires dans la section kpi-section -->



            <div class="kpi-card smoke">
                <div class="kpi-icon">üö¨
                </div>
                <div class="kpi-content">
                    <div class="kpi-label">Consommateurs tabac</div>
                    <div class="kpi-value">{{ statistiques.tabac?.frequenceTabagiques || 0 | number }}</div>
                </div>
            </div>



            <!-- Section des statistiques d√©taill√©es -->

        </div>
        <div class="stats-detail-section">
            <h2 class="section-title">
                <span class="section-icon">üìà</span>
                Statistiques D√©taill√©es
            </h2>

            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-label">√Çge m√©dian</div>
                    <div class="stat-value">{{ statistiques.medianeAge || 0 }} <span class="unit">ans</span></div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">√Çge moyen initiation SPA</div>
                    <div class="stat-value">{{ (statistiques.spaPersonnelle?.moyenneAgeInitiation || 0).toFixed(1) }} <span class="unit">ans</span></div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">√Çge m√©dian initiation</div>
                    <div class="stat-value">{{ statistiques.spaPersonnelle?.medianeAgeInitiation || 0 }} <span class="unit">ans</span></div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">Polyconsommation</div>
                    <div class="stat-value">{{ statistiques.spaPersonnelle?.frequencePolyConsommation || 0 }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">Accompagnement sevrage</div>
                    <div class="stat-value">{{ statistiques.spaPersonnelle?.frequenceAccompagnementSevrage || 0 }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">Partage de seringues</div>
                    <div class="stat-value">{{ statistiques.comportementsEtTests?.frequencePartageSeringues || 0 }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">D√©c√®s SPA (entourage)</div>
                    <div class="stat-value">{{ statistiques.spaEntourage?.nombreDecesLiesSpaDansEntourage || 0 }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">Consommation SPA entourage</div>
                    <div class="stat-value">{{ statistiques.spaEntourage?.frequenceConsommationSpaEntourage || 0 }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">√Çge 1√®re cigarette (moy.)</div>
                    <div class="stat-value">{{ (statistiques.tabac?.moyenneAgePremiereCigarette || 0).toFixed(1) }} <span class="unit">ans</span></div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">Paquets/ann√©e (moy.)</div>
                    <div class="stat-value">{{ (statistiques.tabac?.moyennePaquetsAnnee || 0).toFixed(1) }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">√Çge 1√®re conso alcool (moy.)</div>
                    <div class="stat-value">{{ (statistiques.alcool?.moyenneAgePremiereConsommation || 0).toFixed(1) }} <span class="unit">ans</span></div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">Quantit√© alcool (moy.)</div>
                    <div class="stat-value">{{ (statistiques.alcool?.moyenneQuantiteConsommee || 0).toFixed(1) }}</div>
                </div>

                <div class="stat-item">
                    <div class="stat-label">M√©diane consultations</div>
                    <div class="stat-value">{{ statistiques.conduiteTherapeutique?.medianeNombreConsultations || 0 }}</div>
                </div>
            </div>
        </div>
        <!-- Charts Grid -->
        <div class="charts-container">
            <!-- Ajoutez ces cartes dans charts-container apr√®s vos charts existants -->

            <!-- Situation Familiale -->
            <div class="chart-card" *ngIf="situationFamilialeChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                        Situation Familiale
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="situationFamilialeChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Motif de Consultation -->
            <div class="chart-card" *ngIf="motifConsultationChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üè•</span>
                        Motif de Consultation
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="motifConsultationChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Couverture Sociale -->
            <div class="chart-card" *ngIf="couvertureSocialeChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üõ°Ô∏è</span>
                        Couverture Sociale
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="couvertureSocialeChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Situation de Logement -->
            <div class="chart-card wide" *ngIf="situationLogementChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üè†</span>
                        Situation de Logement
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="situationLogementChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Nature du Logement -->
            <div class="chart-card" *ngIf="natureLogementChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üèòÔ∏è</span>
                        Nature du Logement
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="natureLogementChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Fr√©quence Tabac -->
            <div class="chart-card" *ngIf="frequenceTabacChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üö¨</span>
                        Fr√©quence de Consommation - Tabac
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="frequenceTabacChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Fr√©quence Alcool -->
            <div class="chart-card" *ngIf="frequenceAlcoolChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üç∑</span>
                        Fr√©quence de Consommation - Alcool
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="frequenceAlcoolChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Lien Consommateur Entourage -->
            <div class="chart-card" *ngIf="lienConsommateurEntourageChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üë•</span>
                        Lien avec Consommateurs dans l'Entourage
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="lienConsommateurEntourageChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- SPA d'Initiation -->
            <div class="chart-card" *ngIf="spaInitiationChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üéØ</span>
                        Substances d'Initiation
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="spaInitiationChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Fr√©quence Substance Principale -->
            <div class="chart-card wide" *ngIf="frequenceSubstancePrincipaleChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üìä</span>
                        Fr√©quence de Consommation - Substance Principale
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="frequenceSubstancePrincipaleChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Voies d'Administration -->
            <div class="chart-card" *ngIf="voiesAdministrationChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üíâ</span>
                        Voies d'Administration des SPA
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="voiesAdministrationChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- ATCD Psychiatriques -->
            <div class="chart-card" *ngIf="atcdPsychiatriquesChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üß†</span>
                        Ant√©c√©dents Psychiatriques (Top 5)
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="atcdPsychiatriquesChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- ATCD Somatiques -->
            <div class="chart-card" *ngIf="atcdSomatiquesChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">‚öïÔ∏è</span>
                        Ant√©c√©dents Somatiques (Top 5)
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="atcdSomatiquesChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>
            <!-- R√©partition d√©mographique -->
            <div class="chart-card" *ngIf="sexeChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üë•</span>
                        R√©partition par Sexe
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="sexeChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="ageChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üìä</span>
                        R√©partition par Tranche d'√Çge
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="ageChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>
            <!--
                       <div class="chart-card" *ngIf="demandesTraitementSexeChartData">
                           <div class="chart-header">
                               <h3>
                                   <span class="chart-icon">üîç</span>
                                   Demandes de Traitement par Sexe
                               </h3>
                           </div>
                           <div class="chart-body">
                               <canvas baseChart
                                       [data]="demandesTraitementSexeChartData"
                                       [type]="doughnutChartType"
                                       [options]="doughnutChartOptions">
                               </canvas>
                           </div>
                       </div>
           -->
            <!-- Substances -->
            <div class="chart-card wide" *ngIf="substancesChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üíä</span>
                        Substances Psychoactives les Plus Consomm√©es
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="substancesChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card wide" *ngIf="demandesTraitementSubstanceChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üìã</span>
                        Demandes de Traitement par Substance
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="demandesTraitementSubstanceChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- G√©ographie -->
            <div class="chart-card wide" *ngIf="regionChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üó∫Ô∏è</span>
                        R√©partition par R√©gion (Top 10)
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="regionChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Profil socio-√©conomique -->
            <div class="chart-card" *ngIf="professionChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üíº</span>
                        R√©partition par Profession
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="professionChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="secteurChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üè¢</span>
                        R√©partition par Secteur
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="secteurChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="nationaliteChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üåç</span>
                        R√©partition par Nationalit√©
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="nationaliteChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="niveauScolaireChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üéì</span>
                        R√©partition par Niveau Scolaire
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="niveauScolaireChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Consommation -->
            <div class="chart-card" *ngIf="modesAdministrationChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üíâ</span>
                        Modes d'Administration
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="modesAdministrationChartData"
                            [type]="pieChartType"
                            [options]="pieChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="typesAlcoolChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üç∑</span>
                        Types d'Alcool Consomm√©s
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="typesAlcoolChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="alcoolChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üìà</span>
                        Statistiques Alcool
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="alcoolChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="tabacChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üö¨</span>
                        Statistiques Tabac
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="tabacChartData"
                            [type]="lineChartType"
                            [options]="lineChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Associations et entourage -->
            <div class="chart-card wide" *ngIf="associationsSpaChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üîó</span>
                        Associations de SPA Fr√©quentes
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="associationsSpaChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="spaEntourageChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                        SPA Consomm√©es par l'Entourage
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="spaEntourageChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="substancesPrincipalesChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">‚öïÔ∏è</span>
                        Substances Principales Polyconsommateurs
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="substancesPrincipalesChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Sant√© -->
            <div class="chart-card wide" *ngIf="testDepistageChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üß™</span>
                        Tests de D√©pistage
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="testDepistageChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>


            <div class="chart-card" *ngIf="comorbiditeChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üè•</span>
                        Comorbidit√©s
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="comorbiditeChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Addictions -->
            <div class="chart-card" *ngIf="autresAddictionsChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üéÆ</span>
                        Autres Addictions
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="autresAddictionsChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Prise en charge -->
            <div class="chart-card wide" *ngIf="modalitesChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üè®</span>
                        Modalit√©s de Prise en Charge
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="modalitesChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="consultationsChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üìÖ</span>
                        Nombre Moyen de Consultations
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="consultationsChartData"
                            [type]="lineChartType"
                            [options]="lineChartOptions">
                    </canvas>
                </div>
            </div>

            <!-- Health Indicators -->
            <div class="chart-card wide" *ngIf="hospitalisationsChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üè•</span>
                        Hospitalisations Li√©es aux Drogues
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="hospitalisationsChartData"
                            [type]="barChartType"
                            [options]="barChartOptions">
                    </canvas>
                </div>
            </div>

            <div class="chart-card" *ngIf="echangeSeringuesChartData">
                <div class="chart-header">
                    <h3>
                        <span class="chart-icon">üíâ</span>
                        √âchange de Seringues par ONG
                    </h3>
                </div>
                <div class="chart-body">
                    <canvas baseChart
                            [data]="echangeSeringuesChartData"
                            [type]="doughnutChartType"
                            [options]="doughnutChartOptions">
                    </canvas>
                </div>
            </div>


        </div>
    </div>
</div>
